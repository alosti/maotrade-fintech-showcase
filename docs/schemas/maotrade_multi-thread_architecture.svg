<svg width="800" height="450" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="450" fill="#f1f5f9"/>
  
  <!-- Title -->
  <text x="400" y="36" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">
    Architettura MAOTrade Multi-Thread
  </text>
  
  <!-- TradeManager Box -->
  <rect x="50" y="80" width="180" height="120" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" rx="5"/>
  <text x="140" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#2196f3">TradeManager</text>
  <text x="140" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#2196f3">(Threading)</text>
  <text x="70" y="150" font-family="Arial, sans-serif" font-size="11">• Sistema Core</text>
  <text x="70" y="170" font-family="Arial, sans-serif" font-size="11">• Gestione Trading</text>
  
  <!-- ClientMgr Box -->
  <rect x="310" y="80" width="180" height="140" fill="#e8f5e8" stroke="#4caf50" stroke-width="2" rx="5"/>
  <text x="400" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#4caf50">ClientMgr</text>
  <text x="400" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#4caf50">(Threading)</text>
  <text x="330" y="150" font-family="Arial, sans-serif" font-size="11">• Socket Server</text>
  <text x="330" y="170" font-family="Arial, sans-serif" font-size="11">• Request Proc</text>
  <text x="330" y="190" font-family="Arial, sans-serif" font-size="11">• Log Compress</text>
  <text x="330" y="210" font-family="Arial, sans-serif" font-size="11">• MTProxy Proto</text>
  
  <!-- GatewayMsg Box -->
  <rect x="570" y="80" width="180" height="120" fill="#fff3e0" stroke="#ff9800" stroke-width="2" rx="5"/>
  <text x="660" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ff9800">GatewayMsg</text>
  <text x="660" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#ff9800">(Threading)</text>
  <text x="590" y="150" font-family="Arial, sans-serif" font-size="11">• Broker Comm</text>
  <text x="590" y="170" font-family="Arial, sans-serif" font-size="11">• Order Mgmt</text>
  <text x="590" y="190" font-family="Arial, sans-serif" font-size="11">• Price Feed</text>
  
  <!-- MAOApi Box -->
  <rect x="310" y="320" width="180" height="80" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" rx="5"/>
  <text x="400" y="353" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#9c27b0">MAOApi</text>
  <text x="400" y="373" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#9c27b0">(MTProxy)</text>
  
  <!-- Arrows and IPC labels -->
  <!-- TradeManager <-> ClientMgr -->
  <line x1="230" y1="140" x2="310" y2="140" stroke="#2196f3" stroke-width="2" marker-end="url(#arrowhead-blue)"/>
  <line x1="310" y1="160" x2="230" y2="160" stroke="#4caf50" stroke-width="2" marker-end="url(#arrowhead-grafite)"/>
  <text x="270" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Queue-based</text>
  <text x="270" y="132" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">IPC</text>
  
  <!-- ClientMgr <-> GatewayMsg -->
  <line x1="490" y1="140" x2="570" y2="140" stroke="#4caf50" stroke-width="2" marker-end="url(#arrowhead-grafite)"/>
  <line x1="570" y1="160" x2="490" y2="160" stroke="#ff9800" stroke-width="2" marker-end="url(#arrowhead-grafite)"/>
  <text x="530" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Queue-based</text>
  <text x="530" y="132" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">IPC</text>
  
  <!-- MAOApi -> ClientMgr -->
  <line x1="400" y1="320" x2="400" y2="220" stroke="#9c27b0" stroke-width="2" marker-end="url(#arrowhead-grafite)"/>
  
  <!-- Arrow marker definitions -->
  <defs>
    <marker id="arrowhead-blue" markerWidth="7" markerHeight="4.9" refX="6.3" refY="2.45" orient="auto">
      <polygon points="0 0, 7 2.45, 0 4.9" fill="#555"/>
    </marker>
    <marker id="arrowhead-grafite" markerWidth="7" markerHeight="4.9" refX="6.3" refY="2.45" orient="auto">
      <polygon points="0 0, 7 2.45, 0 4.9" fill="#555"/>
    </marker>
  </defs>
</svg>
